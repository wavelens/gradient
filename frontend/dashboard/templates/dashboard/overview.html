<!--
 * SPDX-FileCopyrightText: 2025 Wavelens UG <info@wavelens.io>
 *
 * SPDX-License-Identifier: AGPL-3.0-only
 -->

{% extends 'dashboard/index.html' %}


<head>
    {% load static %}
    {% load i18n %}
</head>

{% block title %}{% trans 'Dashboard' %}{% endblock %}

{% block content %}

{% include "../individualHeader.html" %}

<!-- <div class="container">
    <div class="header">
        <div class="left">
            <h1>{% trans 'Projects' %}</h1>
        </div>
        <div class="right">
            <button class="button-clear">{% trans 'Clear All Filters' %}</button>|
            <button class="button-round">{% trans 'Branches' %}</button>
            <select class="field-select">
                <option>{% trans 'Advanced Filter' %}</option>
            </select>
        </div>
    </div>
    <div>
        <div class="left">
            <div class="filter-container">
                <div class="search-container">
                    <input type="text" placeholder="Search">
                    <button class="button-round search-button">{% trans 'Search' %}</button>
                    |<button class="button-clear">{% trans 'Clear search' %}</button>
                </div>
            </div>
        </div>
        <div class="right">
            <input class="field-date" type="date">
        </div>
    </div>
    <table class="workflows-table">
        <thead>
            <tr>
                <th>{% trans 'Project' %}</th>
                <th>{% trans '# of exec.' %}</th>
                <th>{% trans 'Avg. Duration' %}</th>
                <th>{% trans 'WF Performance' %}</th>
                <th>{% trans 'Latest 5 runs' %}</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for block in details_blocks %}
                <tr>
                    <td>
                        <a class="full-width" href="{% url 'log' block.id %}">
                            <span>{% trans block.project %}</span><br><span class="text-light">{{ block.id }}</span>
                        </a>
                    </td>
                    <td>{{ block.exec }}</td>
                    <td>{{ block.duration }}</td>
                    <td> -->
                        <!-- <img class="red-filter" src="{% static 'dashboard/images/x-circle.svg' %}" alt="X Circle">
                        <img class="green-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                        <img class="gray-filter" src="{% static 'dashboard/images/circle.svg' %}" alt="X Circle"> -->
                        <!-- <span class="material-icons {% if block.wfp.1 == 'true' %}green{% elif block.wfp.1 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.wfp.1 == 'true' or block.wfp.1 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.wfp.2 == 'true' %}green{% elif block.wfp.2 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.wfp.2 == 'true' or block.wfp.2 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.wfp.3 == 'true' %}green{% elif block.wfp.3 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.wfp.3 == 'true' or block.wfp.3 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                    </td>
                    <td> -->
                        <!-- <img class="gray-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                        <img class="gray-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                        <img class="gray-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                        <img class="gray-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle">
                        <img class="green-filter" src="{% static 'dashboard/images/check-circle.svg' %}" alt="X Circle"> -->
                        <!-- <span class="material-icons {% if block.latestRuns.1 == 'true' %}green{% elif block.latestRuns.1 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.latestRuns.1 == 'true' or block.latestRuns.1 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.latestRuns.2 == 'true' %}green{% elif block.latestRuns.2 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.latestRuns.2 == 'true' or block.latestRuns.2 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.latestRuns.3 == 'true' %}green{% elif block.latestRuns.3 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.latestRuns.3 == 'true' or block.latestRuns.3 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.latestRuns.4 == 'true' %}green{% elif block.latestRuns.4 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.latestRuns.4 == 'true' or block.latestRuns.4 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                        <span class="material-icons {% if block.latestRuns.5 == 'true' %}green{% elif block.latestRuns.5 == 'nothing' %}gray{% else %}red{% endif %}">
                            {% if block.latestRuns.5 == 'true' or block.latestRuns.5 == 'nothing' %}check_circle{% else %}cancel{% endif %}
                        </span>
                    </td>
                    <td>
                        <a href="/"><img src="{% static 'dashboard/images/more-vertical.svg' %}" alt="More"></a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div> -->

<div class="container">
    <div class="header m-b-1rem">
        <div>
            <h1>{% trans 'Projects' %}</h1>
        </div>
    </div>
    <div class="m-b-1rem">
        <div class="filter-container">
            <div class="search-container">
                <span class="material-symbols-outlined">
                    search
                </span>
                <input type="text" id="searchInput" placeholder="Search" class="bg-none">
            </div>
        </div>
    </div>


    <div class="home-container">
        {% for block in details_blocks %}
            <div  class="workflow-item">
                <a class="full-width normal-hover blue-span" href="{% url 'log-eval' org_id block.id %}">
                    <span class="workflow-title">{{ block.display_name }}</span><br><span class="text-light">{% trans block.description %}</span>
                </a>
                <div class="d-flex p-0">
                    <span class="flex-c m-r-1rem">
                        <span class="material-symbols-outlined m-r-3">
                            mode_standby
                        </span>
                        <span class="text-light-n-s">{{ block.exec }}</span>
                    </span>
                    <span class="flex-c">
                        <span class="material-symbols-outlined m-r-3">
                            graph_1
                        </span>
                        <span class="text-light-n-s">{{ block.id }}{{ block.id3 }}</span>
                    </span>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        let searchInput = document.getElementById("searchInput");
        let items = document.querySelectorAll(".workflow-item");

        searchInput.addEventListener("input", function() {
            let filter = searchInput.value.toLowerCase();

            items.forEach(item => {
                let titleElement = item.querySelector(".workflow-title");
                
                if (titleElement) {
                    let title = titleElement.textContent.toLowerCase();
                    item.style.display = title.includes(filter) ? "" : "none";
                }
            });
        });
    });
</script>
{% endblock %}
